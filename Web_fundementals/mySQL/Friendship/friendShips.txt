Using the below ERD as reference, write a SQL query that returns a list of users along with their friends' names.


SELECT  users.id , users.first_name, users.last_name, user2.first_name AS friend_first_name, user2.last_name AS friend_last_name FROM users
JOIN friendships ON users.id = friendships.user_id
LEFT JOIN users AS user2 ON user2.id = friendships.friend_id;

QUESTIONS :

1-Return all users who are friends with Kermit, make sure their names are displayed in results.
2-Return the count of all friendships
3-Find out who has the most friends and return the count of their friends.
4-Create a new user and make them friends with Eli Byers, Kermit The Frog, and Marky Mark
5-Return the friends of Eli in alphabetical order
6-Remove Marky Mark from Eliâ€™s friends.
7-Return all friendships, displaying just the first and last name of both friends


ANSWERS :

1- SELECT  users.id , users.first_name, users.last_name, user2.first_name AS friend_first_name, user2.last_name AS friend_last_name FROM users
JOIN friendships ON users.id = friendships.user_id
LEFT JOIN users AS user2 ON user2.id = friendships.friend_id
WHERE user2.first_name = 'Kermit'

2- SELECT  users.id , users.first_name, users.last_name, count(user2.first_name) AS count_friendships FROM users
JOIN friendships ON users.id = friendships.user_id
LEFT JOIN users AS user2 ON user2.id = friendships.friend_id
GROUP BY users.id

3- SELECT  users.id , users.first_name, users.last_name, count(user2.id) AS count_friendships FROM users
JOIN friendships ON users.id = friendships.user_id
LEFT JOIN users AS user2 ON user2.id = friendships.friend_id
GROUP BY users.id
ORDER BY users.id limit 1;

4- INSERT INTO users (first_name,last_name,created_at)
VALUES ('Salman','Khatib',NOW()); // has id = 6
INSERT INTO friendships (user_id,friend_id,created_at)
VALUES ( 6, 2 , NOW());
INSERT INTO friendships (user_id,friend_id,created_at)
VALUES ( 6, 4 , NOW());
INSERT INTO friendships (user_id,friend_id,created_at)
VALUES ( 6, 5 , NOW());




5- SELECT users.first_name,users.last_name, user2.first_name AS friend_first_name, user2.last_name AS friend_last_name
FROM users
JOIN friendships ON users.id = friendships.user_id
LEFT JOIN users as user2 ON user2.id = friendships.friend_id
WHERE users.first_name = 'Eli' 
ORDER BY user2.first_name ASC

6- DELETE FROM friendships 
WHERE id = 5

7- SELECT users.first_name,users.last_name,user2.first_name as friend_first_name , user2.last_name as friend_last_name
FROM users
JOIN friendships ON users.id = friendships.user_id
LEFT JOIN users as user2 ON user2.id = friendships.friend_id